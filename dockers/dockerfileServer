FROM mcr.microsoft.com/openjdk/jdk:21-ubuntu AS build

RUN apt-get update
RUN apt-get install git -y
RUN git clone https://github.com/jonavano/java-api-jpa-hibernate-part2.git
WORKDIR java-api-jpa-hibernate-part2

RUN chmod +x gradlew
RUN ./gradlew build

FROM mcr.microsoft.com/openjdk/jdk:21-ubuntu
COPY --from=build /java-api-jpa-hibernate-part2/build/libs/ .


EXPOSE 4000

ENTRYPOINT [ "java", "-jar", "Java APIs, JPA and Hibernate Part 2-0.0.1-SNAPSHOT.jar" ]

# ENTRYPOINT [ "java", "-jar", "build/libs/Java APIs, JPA and Hibernate Part 2-0.0.1-SNAPSHOT.jar" ]